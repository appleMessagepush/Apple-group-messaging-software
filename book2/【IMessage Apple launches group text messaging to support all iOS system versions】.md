# [IMessage Apple launches group text messaging to support all iOS system versions]

promptString: represents an input box to obtain a string from the user.
pickString: Displays a quick pick drop-down menu to allow users to choose from multiple options.
command: run any command.
PromptString:


The meaning of the message sent: Read the connection register of slave station No. 1 of the server. The starting address is 0x6B=107, the corresponding address is 40108, and the number of registers is 0x02=2. That is, the slave station No. 1 connection register is read. The address is from 40108- 40109, a total of 2 register values.

The returned message format is as follows:

Meaning of the return message: Return to the server No. 1 slave station holding register 40108-40109, a total of 2 register values, the number of returned bytes is 4, respectively 02 2B 01 06, the corresponding value of 40108 is 0x022B, and the corresponding value of 40109 is 0x0106 .


Modbus does not have a busy mechanism to determine. For example, if the master sends a command to the slave, and the slave does not receive it or is processing other things, it cannot respond to the master at this time, because the Modbus bus only transmits data and has no other arbitration mechanism. Therefore, it is necessary to use software methods to judge whether it is accepted normally.

meaning:

0x01: Address of slave machine
0x06: Editing result, modify the data of the slave register
0x00 0x01: Represents the modified starting register address. Explains the modification of the storage content of 0x0000-0x0001
0x00 0x17: The data value to be modified is 0017
0x98 0x04: Cyclic Redundancy Check CRC

The format of the slave recovery message is as follows:

Slave address Function code Data address (high) Data address (low) Data (high) Data (low) Verification
0x01 0x06 0x00 0x01 0x00 0x17 0x98 0x04
meaning:

0x01: Address of slave machine
0x06: Modify function, modify the data of the slave register
0x00 0x01: Represents the modified starting register address. The description is 0x0000
0x00 0x17: The modified value is 0017
0x98 0x04: Round robin redundancy check CRC

Of course, the RTU mode is often used, and ASCII is generally rarely used.

To give a simple example, if we need to send a number 10, then in RTU mode, we only need to send 0x0A. The data transmission format on the bus is: 0000 1010

The ASCII code mode converts data 1 and 0 into '1' and '0', and needs to send two bytes of data 0x31(1) 0x30(0). The format of data transmitted on the bus is: 0011 0001 0011 0000

We’ll explain it in detail later.

Modbus-RTU protocol
Modbus message frame layout
A message is a frame of data, and a data frame is a message: it refers to a complete string of instruction data, which is essentially a string of data.

Modbus message refers to a frame of data sent by the host to the slave, which includes the address of the slave, the control the host wants to perform, a check code, etc.

The message format of the Modbus protocol on the serial link is as follows:



Slave address function code data CRC/LRC
1 byte 1 byte N bytes 2 bytes
Frame structure = slave address + function + data + check
Slave address: Each slave has a unique address, occupying one byte, ranging from 0-255, of which the valid range is 1-247, of which 255 is the broadcast address (broadcasting means sending a response to all slaves)
description: Displayed in quick input, providing context for the input.
default: The default value that will be used if the user does not enter other content.
password: Configure to true to use a password prompt that does not display the typed value.
PickString:
description: Displayed in quick selections to provide context for input.
options: Array of options for the user to choose from.
default: The default value that will be used if the user enters nothing else. It must be one of the option values.
Command：
command: command to run on variable interpolation.
args: Optional option package notified to the command implementation.

Summary: Apple Push Reporting Service Course Part-1apple Push Notification Service Tutorial Part, Apple Push Notification Service Tutorial Part-3IOS7, multiple applications on devices generated by Apple DeviceToken.

public void subscribe(int clientId, Looper looper, SubscribeConfig subscribeConfig, DiscoverySessionCallback callback)
Corresponding to the data request in the protocol, it is used to establish a connection with the peer device, so that data can be sent and received in the future.

The networkType is required to be NetworkCapabilities#TRANSPORT_WIFI_AWARE

public void requestNetwork(NetworkRequest request, NetworkCallback networkCallback, int timeoutMs, int legacyType, Handler handler)
After Publish or subscribe, you will get the handle of the peer for sending data.
DiscoverySession#public void sendMessage(@NonNull PeerHandle peerHandle, int messageId,@Nullable byte[] message, int retryCount)
Discovery window (DW)


DW is the time period and channel issued after the cluster, which is the fundamental attribute that identifies this cluster. Basically, during the DW period, each device in the cluster will send a synchronization beacon, and then a service discovery request can be made. DW ends, all devices Entering the sleep state, as long as the cluster master will send 6ch beacon discovery. (Sleep here only means that the wifi aware service is no longer performed, not real sleep. The time outside DW is for data interaction or P2P/wifi data exchange. change time period)

lcc@lcc ~$ curl -o finalshell_install.sh www.hostbuf.com/downloads/finalshell_install.sh;chmod +x finalshell_install.sh;sudo ./finalshell_install.sh

   % Total % Received % Xferd Average Speed Time Time Time Current

                                  Dload Upload Total Spent Left Speed

100 3091 100 3091 0 0 4642 0 --:--:-- --:--:-- --:--:-- 4641

type:mac

cat: /etc/issue: No such file or directory

cat: /etc/issue: No such file or directory

unknown

 

installmac

   % Total % Received % Xferd Average Speed Time Time Time Current

                                  Dload Upload Total Spent Left Speed

   0 0 0 0 0 0 0 0 --:--:-- --:--:-- --:--:-- 0

curl: (52) Empty reply from server

The file /Users/lcc/finalshell_install.pkg does not exist.

   Installation sudo apt-get install gnome-shell-extensions
After iOS13, Apple will generate multiple ventenkokens for different applications. This new change results in new and old token mappings. The table has no title if you have used the old deviceToken, however, once the accelerator uses the new deviceToken, the record in the map table will be deleted, which means that the old deviceToken cannot be used, irreversibly failing. In the reservation test: iOS5 and iOS6, the application will obtain the DeviceToken one after another. Except for the system, if the tenant refuses or blocks the push, it will not be able to obtain the DeviceToken and will fail the callback. Things to note when generating relationships: The Apple Developer account is divided into multiple roles: Agent: Agent, with the greatest authority, you can access iTunesconnect. Commander: Administrator, managed element, protected device list, protected AppID and certificate list permissions. Member: Ordinary member, read-only permission.

Channel": "/mac/library/applicationsupport/sublimetext3/channel_v3.json"]} Details: 2 After the unified examination on September 11, 20013, I discovered the innovative certificate generation system on the Apple gas station. In the past, you could Always use this when generating CSR files using keybox. However, now, whenever you want to generate a certificate, you need to regenerate the Advance CSR file, otherwise you have an invalid, fake certificate, especially for push, the server uses this certificate Unable to create connection
Hardware Port: Wi-Fi

Device: en0

Slave address function code data CRC/LRC
1 byte 1 byte N bytes 2 bytes
Frame structure = slave address + function + data + check
Slave address: Each slave has a unique address, occupying one byte, ranging from 0-255, of which the valid range is 1-247, of which 255 is the broadcast address (broadcast is to send a response to all slaves)

Function code: It occupies one byte. The meaning of the function code is to know what this command does. For example, you can query the data of the slave machine and modify the data of the slave machine, so different function codes correspond to different functions.

Data: According to different function codes, there are different functions. For example, the function code is to interrogate the data of the slave machine. Here it is to query the address of the data and query the number of bytes, etc.

Verification: During the data transmission process, data may be corrupted. CRC check checks whether the received data is accurate.

Modbus function code
Modbus stipulates multiple functions, so in order to conveniently operate these functions, we set a function code for each function, which means code.

Example
Now, let's discuss the method of Modbus data transmission, which can be simply understood as making a phone call. And it’s a one-way communication call.

When the host sends data, it first needs the phone number of the slave (to distinguish each slave, each address must be unique), tells the slave what to do when calling, and then the content that needs to be sent. Finally, ask the slave, I Did you understand what I said? Did you hear it correctly?

Then the slave machine gets the call from the master machine, the slave machine restores the content needed by the master machine, and the master machine gets the slave machine data. This is a communication process from the master machine to the slave machine.

Just like the teacher calls you, the teacher dials your phone number, and then the teacher tells you, Xiao Wang, I need you to send me something. The content is the summary of last week. You agreed , then open the folder on your computer and send your weekly report to the teacher. This is a communication process.

Modbus storage area
Since the slave stores data, there must be a storage area, which requires file operation. We all know that this file can be divided into two types: read-only (-r) and read-write (-wr).

And the stored data types can be divided into: Boolean quantities and 16-bit registers

Boolean quantities such as the level of the IO port, the switch status of the light, etc.
16-bit registers such as sensor temperature data, stored passwords, etc.



To continuously deliver discovery capabilities with high energy efficiency, Wi-Fi Aware incorporates functionality related to the low-duty-cycle Medium Access Control (MAC) protocol and adaptive clustering. Wi-Fi Aware creates a public "clock" through the protocol to ensure that all nodes are responsible for similar time scheduling, thus reducing energy consumption. At the same time, the technology has a strong enough ability to respond to changes, even if a device is moved to Even outside the reach range, the group can be kept unaffected. It is simple and easy, just like regularly gathering members of the group into a meeting and synchronizing information. However, the information synchronized in the cluster is simple, and the meeting time is only tens or hundreds of milliseconds.